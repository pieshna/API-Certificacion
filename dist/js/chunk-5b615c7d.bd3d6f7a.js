(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b615c7d"],{2532:function(e,t,r){"use strict";var o=r("23e7"),c=r("5a34"),n=r("1d80"),a=r("ab13");o({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~String(n(this)).indexOf(c(e),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,r){"use strict";var o=r("6eeb"),c=r("825a"),n=r("d039"),a=r("ad6d"),i="toString",u=RegExp.prototype,d=u[i],l=n((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),s=d.name!=i;(l||s)&&o(RegExp.prototype,i,(function(){var e=c(this),t=String(e.source),r=e.flags,o=String(void 0===r&&e instanceof RegExp&&!("flags"in u)?a.call(e):r);return"/"+t+"/"+o}),{unsafe:!0})},"44e7":function(e,t,r){var o=r("861d"),c=r("c6b6"),n=r("b622"),a=n("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==c(e))}},"4d73":function(e,t,r){"use strict";r("f0c0")},"5a34":function(e,t,r){var o=r("44e7");e.exports=function(e){if(o(e))throw TypeError("The method doesn't accept regular expressions");return e}},"99af":function(e,t,r){"use strict";var o=r("23e7"),c=r("d039"),n=r("e8b5"),a=r("861d"),i=r("7b0b"),u=r("50c4"),d=r("8418"),l=r("65f0"),s=r("1dde"),p=r("b622"),b=r("2d00"),m=p("isConcatSpreadable"),g=9007199254740991,f="Maximum allowed index exceeded",j=b>=51||!c((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=s("concat"),O=function(e){if(!a(e))return!1;var t=e[m];return void 0!==t?!!t:n(e)},h=!j||!v;o({target:"Array",proto:!0,forced:h},{concat:function(e){var t,r,o,c,n,a=i(this),s=l(a,0),p=0;for(t=-1,o=arguments.length;t<o;t++)if(n=-1===t?a:arguments[t],O(n)){if(c=u(n.length),p+c>g)throw TypeError(f);for(r=0;r<c;r++,p++)r in n&&d(s,p,n[r])}else{if(p>=g)throw TypeError(f);d(s,p++,n)}return s.length=p,s}})},ab13:function(e,t,r){var o=r("b622"),c=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[c]=!1,"/./"[e](t)}catch(o){}}return!1}},ad6d:function(e,t,r){"use strict";var o=r("825a");e.exports=function(){var e=o(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,r){var o=r("83ab"),c=r("9bf2").f,n=Function.prototype,a=n.toString,i=/^\s*function ([^ (]*)/,u="name";o&&!(u in n)&&c(n,u,{configurable:!0,get:function(){try{return a.call(this).match(i)[1]}catch(e){return""}}})},caad:function(e,t,r){"use strict";var o=r("23e7"),c=r("4d64").includes,n=r("44d2");o({target:"Array",proto:!0},{includes:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},e0a3:function(e,t,r){"use strict";r.r(t);r("b0c0");var o=r("7a23"),c=Object(o["G"])("data-v-47235e10");Object(o["s"])("data-v-47235e10");var n={class:"body"},a=Object(o["g"])("br",null,null,-1),i=Object(o["g"])("h1",null,"Comprar Producto",-1),u=Object(o["g"])("hr",null,null,-1),d=Object(o["g"])("br",null,null,-1),l={class:"row justify-content-center"},s=Object(o["g"])("br",null,null,-1),p={class:"container cuerpo"},b=Object(o["g"])("br",null,null,-1),m=Object(o["g"])("br",null,null,-1),g=Object(o["g"])("br",null,null,-1),f={class:"row"},j={class:"form-group col-md-6"},v=Object(o["g"])("label",null,"Producto",-1),O=Object(o["g"])("option",{disabled:"",selected:""},"Seleccione un producto",-1),h={class:"form-group col-md-3"},C=Object(o["g"])("label",null,"Cantidad actual",-1),y={class:"form-group col-md-3"},k=Object(o["g"])("label",null,"Precio de Compra",-1),w={class:"row"},x={class:"form-group col-md-6"},P=Object(o["g"])("label",null,"Descripcion",-1),_={key:0,class:"form-group col-md-6"},R=Object(o["g"])("label",null,"Productos a Comprar",-1),E={class:"row"},V={class:"form-group col-md-3"},S=Object(o["g"])("label",null,"Cantidad a comprar",-1),U={key:0,class:"form-group col-md-3"},I=Object(o["g"])("label",null,"Nueva cantidad",-1),A={class:"form-group col-md-6"},T=Object(o["g"])("label",null,"Proveedor",-1),B=Object(o["g"])("option",{disabled:"",selected:""},"Seleccione un Proveedor",-1),L=Object(o["g"])("br",null,null,-1),z={class:"row justify-content-between"},F={class:"form-group col-md-2"},J=Object(o["g"])("button",{class:"btn btn-block btn-danger"}," Cancelar ",-1),q={class:"form-group col-md-2"},D={class:"form-group col-md-2 derecha"};Object(o["q"])();var G=c((function(e,t,r,G,M,N){var $=Object(o["w"])("router-link");return Object(o["p"])(),Object(o["d"])("div",n,[a,i,u,d,Object(o["g"])("form",{onSubmit:t[13]||(t[13]=Object(o["F"])((function(){}),["prevent"])),enctype:"multipart/form-data"},[Object(o["g"])("div",l,[null!=M.tempProducto.imagen?(Object(o["p"])(),Object(o["d"])("img",{key:0,src:M.tempProducto.imagen},null,8,["src"])):Object(o["e"])("",!0),s]),Object(o["g"])("div",p,[b,m,g,Object(o["g"])("div",f,[Object(o["g"])("div",j,[v,Object(o["E"])(Object(o["g"])("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=function(e){return M.producto._id=e}),onChange:t[2]||(t[2]=function(){return N.actualizador&&N.actualizador.apply(N,arguments)})},[O,(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["v"])(M.producto,(function(e){return Object(o["p"])(),Object(o["d"])("option",{value:e._id,key:e._id},Object(o["y"])(e.name)+" - "+Object(o["y"])(e.marca),9,["value"])})),128))],544),[[o["A"],M.producto._id]])]),Object(o["g"])("div",h,[C,Object(o["E"])(Object(o["g"])("input",{type:"text",class:"form-control",placeholder:"Ingrese la marca del producto","onUpdate:modelValue":t[3]||(t[3]=function(e){return M.tempProducto.cantidad=e}),disabled:""},null,512),[[o["B"],M.tempProducto.cantidad]])]),Object(o["g"])("div",y,[k,Object(o["E"])(Object(o["g"])("input",{type:"text",class:"form-control",placeholder:"Ingrese el precio de compra","onUpdate:modelValue":t[4]||(t[4]=function(e){return M.tempProducto.precioCompra=e})},null,512),[[o["B"],M.tempProducto.precioCompra]])])]),Object(o["g"])("div",w,[Object(o["g"])("div",x,[P,Object(o["E"])(Object(o["g"])("textarea",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=function(e){return M.tempProducto.descripcion=e}),rows:"3",disabled:""},null,512),[[o["B"],M.tempProducto.descripcion]])]),null!=M.carrito[0]?(Object(o["p"])(),Object(o["d"])("div",_,[R,Object(o["g"])("ul",null,[(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["v"])(M.carrito,(function(e){return Object(o["p"])(),Object(o["d"])("li",{key:e._id},Object(o["y"])(e.name)+"-"+Object(o["y"])(e.tempCantidad),1)})),128))])])):Object(o["e"])("",!0)]),Object(o["g"])("div",E,[Object(o["g"])("div",V,[S,Object(o["E"])(Object(o["g"])("input",{type:"number",class:"form-control",placeholder:"Cantidad de productos a ingresar","onUpdate:modelValue":t[6]||(t[6]=function(e){return M.tempProducto.tempCantidad=e}),onChange:t[7]||(t[7]=function(){return N.calcular&&N.calcular.apply(N,arguments)}),min:"1"},null,544),[[o["B"],M.tempProducto.tempCantidad]])]),0!=M.tempProducto.tempCantidad?(Object(o["p"])(),Object(o["d"])("div",U,[I,Object(o["E"])(Object(o["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=function(e){return M.tempProducto.newCantidad=e}),disabled:""},null,512),[[o["B"],M.tempProducto.newCantidad]])])):Object(o["e"])("",!0),Object(o["g"])("div",A,[T,Object(o["E"])(Object(o["g"])("select",{class:"form-select","onUpdate:modelValue":t[9]||(t[9]=function(e){return M.proveedor._id=e}),onChange:t[10]||(t[10]=function(){return N.ponerProveedor&&N.ponerProveedor.apply(N,arguments)})},[B,(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["v"])(M.proveedor,(function(e){return Object(o["p"])(),Object(o["d"])("option",{value:e._id,key:e._id},Object(o["y"])(e.nombre)+" - "+Object(o["y"])(e.empresa),9,["value"])})),128))],544),[[o["A"],M.proveedor._id]])])]),L,Object(o["g"])("div",z,[Object(o["g"])("div",F,[Object(o["g"])($,{to:"/"},{default:c((function(){return[J]})),_:1})]),Object(o["g"])("div",q,[Object(o["g"])("button",{class:"btn btn-block btn-primary",onClick:t[11]||(t[11]=function(){return N.mostrar&&N.mostrar.apply(N,arguments)})}," + ")]),Object(o["g"])("div",D,[Object(o["g"])("button",{class:"btn btn-block btn-success",onClick:t[12]||(t[12]=function(){return N.enviar&&N.enviar.apply(N,arguments)})}," Agregar ")])])])],32)])})),M=r("5530"),N=r("1da1"),$=(r("d3b7"),r("25f0"),r("99af"),r("4de4"),r("caad"),r("2532"),r("96cf"),r("5502")),H=r("bc3a"),K=r.n(H),Q={name:"Compras",data:function(){return{baseURL:"https://backend-pieshna.herokuapp.com/api",producto:{_id:"",name:"",marca:"",descripcion:"",precioCompra:"",precioVenta:"",cantidad:"",imagen:""},tempProducto:{_id:"",name:"",marca:"",descripcion:"",precioCompra:"",precioVenta:"",cantidad:"",imagen:"",tempCantidad:"",newCantidad:"",proveedor:""},carrito:[],proveedor:{},hotImage:{urlImagen:null,imagen:null}}},created:function(){this.recibir()},methods:{recibir:function(){var e=this;return Object(N["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K.a.get("".concat(e.baseURL,"/product"),{headers:{"auth-token":e.token}}).then((function(t){e.producto=t.data})).catch((function(e){console.log(e)}));case 3:return t.next=5,K.a.get("".concat(e.baseURL,"/proveedor"),{headers:{"auth-token":e.token}}).then((function(t){e.proveedor=t.data})).catch((function(e){console.log(e)}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},mostrar:function(){console.log("mostrando"),this.carrito.push(this.tempProducto),console.log("carrito:",this.carrito)},enviar:function(){var e=this;return Object(N["a"])(regeneratorRuntime.mark((function t(){var r,o,c,n,a,i,u,d,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,d=0;case 2:if(!(d<e.carrito.length)){t.next=17;break}return r=e.carrito[d].name,o=e.carrito[d].marca,c=e.carrito[d].descripcion,n=e.carrito[d].precioCompra,a=e.carrito[d].precioVenta,i=e.carrito[d].newCantidad.toString(),u=e.carrito[d].imagen,t.next=12,K.a.put("".concat(e.baseURL,"/product/").concat(e.carrito[d]._id),{name:r,marca:o,descripcion:c,precioCompra:n,precioVenta:a,cantidad:i,imagen:u},{headers:{"auth-token":e.token}}).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}));case 12:l=t.sent,console.log(l);case 14:d++,t.next=2;break;case 17:console.log("generamoscompra"),e.generarCompra(),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},generarCompra:function(){var e=this;return Object(N["a"])(regeneratorRuntime.mark((function t(){var r,o,c,n,a,i,u,d,l,s,p,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=[],o=[],c=[],n=[],a=[],i=[],u=[],d=[],l=[],s=[],p=0;p<e.carrito.length;p++)r.push(e.carrito[p].name),o.push(e.carrito[p].marca),c.push(e.carrito[p].descripcion),n.push(e.carrito[p].precioCompra),a.push(e.carrito[p].precioVenta),i.push(e.carrito[p].newCantidad.toString()),u.push(e.carrito[p].imagen),d.push(e.carrito[p].tempCantidad),l.push(e.carrito[p].newCantidad),s.push(e.carrito[p].proveedor);return t.prev=2,console.log("enviamos a backend",{name:r,marca:o,descripcion:c,precioCompra:n,precioVenta:a,cantidad:i,imagen:u,tempCantidad:d,newCantidad:l,proveedor:s}),t.next=6,K.a.post("".concat(e.baseURL,"/compra/"),{name:r,marca:o,descripcion:c,precioCompra:n,precioVenta:a,cantidad:i,imagen:u,tempCantidad:d,newCantidad:l,proveedor:s},{headers:{"auth-token":e.token}}).then((function(t){e.$router.push("/")})).catch((function(e){console.log(e)}));case 6:b=t.sent,console.log(b),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()},actualizador:function(){var e=this;setTimeout((function(){var t=e.producto.filter((function(t){return t._id.includes(e.producto._id)}));e.tempProducto=t[0]}),300)},ponerProveedor:function(){var e=this;setTimeout((function(){for(var t=e.proveedor.filter((function(t){return t._id.includes(e.proveedor._id)})),r=0;r<e.carrito.length;r++)e.carrito[r].proveedor=t[0]._id;console.log("proveedor actualizado",e.tempProducto.proveedor)}),300)},calcular:function(){this.tempProducto.newCantidad=parseInt(this.tempProducto.cantidad)+parseInt(this.tempProducto.tempCantidad)}},computed:Object(M["a"])({},Object($["c"])(["token"]))};r("4d73");Q.render=G,Q.__scopeId="data-v-47235e10";t["default"]=Q},f0c0:function(e,t,r){}}]);
//# sourceMappingURL=chunk-5b615c7d.bd3d6f7a.js.map